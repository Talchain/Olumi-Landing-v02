@use 'sass:string';
@use 'sass:math';
@use 'sass:map';
@use '../config/main' as *;

@mixin max-prop(
  $cssProperty,
  $min-value,
  $max-value,
  $contextPx: map.get($baseConfig, vwBase)
) {
  & {
    #{$cssProperty}: $max-value; //fallback (MS Edge 18 and below)
    #{$cssProperty}: string.unquote('max(#{$min-value},  #{$max-value})');
  }

  @media (min-width: string.unquote('#{map.get($baseConfig, vwBase)*1.1}px')) {
    $scale-factor: -0.5;
    $dynamic-value: calc(
      max(
        #{$min-value},
        min(
          #{$max-value},
          #{$max-value} - (#{$max-value} - #{$min-value}) *
            min(1, $scale-factor * calc((100 - $contextPx) / $contextPx))
        )
      )
    );

    #{$cssProperty}: $dynamic-value;
  }
}
